{% extends 'page.html.twig' %}

      {%- block css ~%}
      {{ parent() }}
      div#gallery {
        display: flex;
        flex-wrap: wrap;
      }
      div#gallery::after {
        content: '';
        flex-grow: 999999999;
      }
      #gallery span.title {
        z-index: 9999;
        position: fixed;
        margin: 0.5rem;
        font-size: x-large;
      }
      #gallery span.title a {
        text-decoration: none;
      }
      #gallery div.photo {
        flex-grow: 1;
        margin: $margin;
        background-color: $background;
        height: $height;
      }
      #gallery img {
        height: $height;
        width: 100%;
        object-fit: cover;
        max-width: 100%;
        min-width: 100%;
        vertical-align: bottom;
        filter: alpha(opacity=80);
        opacity: 0.8;
      }
      #gallery img:hover {
        filter: alpha(opacity=100);
        opacity: 1;
      }
      #gallery span.author {
        position: relative;
        bottom: 21px;
        left: 0px;
        opacity: .6
      }
      #gallery span.author a {
        text-decoration: none;
      }
      #gallery span.author:hover {
        opacity: 1;
        background-color: $background;
      }
      {%- endblock css ~%}

      {%- block content ~%}
      <div id="gallery">
        <span class="title"><a href="{{ url('/') }}" title="{{ site.description|default(site.title) }}">{{ site.title }}</a></span>
        {%- for file in site.static|filter(f => f.path matches '/^photos/')|sort((a, b) => a.date|date('U') < b.date|date('U')) ~%}
          {%- if site.data.photos[file.basename]|default ~%}
            {%- set photo = site.data.photos[file.basename] -%}
            {%- set alt = photo.alt|default -%}
          {%- endif ~%}
        <div class="photo">
          {%- set image = asset(file.path)|resize(600) ~%}
          <a href="{{ url(file.path) }}" title="{{ alt|default("Click to view this photo in full size"|trans) }}">
            {{ image|html({'alt': alt|default(file.basename), 'loading': 'lazy'}) }}
          </a>
          {%- if photo.author|default ~%}
          <span class="author">
            <a href="{{ site.author.root }}{{ photo.author.handle }}" title="{% trans %}Author's page{% endtrans %}">{{ photo.author.name }}</a>
          </span>
          {%- endif ~%}
        </div>
        {%- set photo = '' -%}
        {%- endfor ~%}
      </div>
      {%- endblock ~%}